<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì‹ ìƒì•„ ì•½ë¬¼ ìš©ëŸ‰ ê³„ì‚°ê¸°</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 600px; margin: auto; }
    input, select, button { margin: 0.5em 0; padding: 0.5em; width: 100%; }
    .result { margin-top: 1em; font-weight: bold; }
  </style>
</head>
<body>
  <h2>ğŸ¼ ì‹ ìƒì•„ ì•½ë¬¼ ìš©ëŸ‰ ê³„ì‚°ê¸°</h2>

  <label for="weight">ì²´ì¤‘ (kg):</label>
  <input type="number" id="weight" placeholder="ì˜ˆ: 2.5" step="0.01"/>

  <label for="drug">ì•½ë¬¼ ì„ íƒ:</label>
  <select id="drug">
    <option value="ampicillin">Ampicillin (50mg/kg/dose)</option>
    <option value="gentamicin">Gentamicin (5mg/kg/dose)</option>
  </select>

  <button onclick="calculateDose()">ê³„ì‚°í•˜ê¸°</button>

  <div class="result" id="output"></div>
  <button onclick="copyResult()">ğŸ“‹ ê²°ê³¼ ë³µì‚¬</button>
  <button onclick="downloadResult()">ğŸ’¾ txt ì €ì¥</button>

  <script>
    function calculateDose() {
      const weight = parseFloat(document.getElementById("weight").value);
      const drug = document.getElementById("drug").value;
      let dose = 0;
      let message = "";

      if (isNaN(weight) || weight <= 0) {
        alert("ìœ íš¨í•œ ì²´ì¤‘ì„ ì…ë ¥í•˜ì„¸ìš”.");
        return;
      }

      if (drug === "ampicillin") {
        dose = 50 * weight;
        message = `Ampicillin: ${dose.toFixed(1)} mg (1íšŒ ìš©ëŸ‰)`;
      } else if (drug === "gentamicin") {
        dose = 5 * weight;
        message = `Gentamicin: ${dose.toFixed(2)} mg (1íšŒ ìš©ëŸ‰)`;
      }

      document.getElementById("output").innerText = `âœ… ê²°ê³¼: ${message}`;
    }

    function copyResult() {
      const text = document.getElementById("output").innerText;
      navigator.clipboard.writeText(text).then(() => alert("ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"));
    }

    function downloadResult() {
      const text = document.getElementById("output").innerText;
      const blob = new Blob([text], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "dose_result.txt";
      link.click();
    }
  </script>
</body>
</html>
