
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>PMA ê³„ì‚°ê¸°</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 2rem; }
    label { font-weight: bold; display: block; margin-top: 1.5rem; }
    .inline { display: flex; gap: 0.5rem; align-items: center; }
    input[type="number"], input[type="date"] {
      padding: 0.5rem;
      font-size: 1rem;
    }
    .result { margin-top: 2rem; font-size: 1.2rem; }
  </style>
</head>
<body>

  <h2>ğŸ‘¶ PMA (ìˆ˜ì • í›„ ì—°ë ¹) ê³„ì‚°ê¸°</h2>

  <label>ì¬íƒœì—°ë ¹:</label>
  <div class="inline">
    <input type="number" id="gaw" min="20" max="45" value="30" />
    +
    <input type="number" id="gawd" min="0" max="6" value="0" />
  </div>

  <label>ì¶œìƒì¼:</label>
  <input type="date" id="birthDate" />

  <label>ê¸°ì¤€ì¼ (Optional, ë¹„ì›Œë‘ë©´ ì˜¤ëŠ˜):</label>
  <input type="date" id="referenceDate" />

  <div class="result" id="result"></div>

  <script>
    function calculatePMA() {
      const gaw = parseInt(document.getElementById('gaw').value);
      const gawd = parseInt(document.getElementById('gawd').value);
      const birthInput = document.getElementById('birthDate').value;
      const refInput = document.getElementById('referenceDate').value;
      const refDate = refInput ? new Date(refInput) : new Date();

      if (isNaN(gaw) || isNaN(gawd) || !birthInput) {
        document.getElementById('result').innerHTML = "";
        return;
      }

      const birthDate = new Date(birthInput);
      const diffTime = refDate - birthDate;

      if (diffTime < 0) {
        document.getElementById('result').innerHTML = "ê¸°ì¤€ì¼ì€ ì¶œìƒì¼ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤.";
        return;
      }

      const daysAfterBirth = Math.floor(diffTime / (1000 * 60 * 60 * 24));
      const totalDays = (gaw * 7 + gawd) + daysAfterBirth;
      const pmaWeeks = Math.floor(totalDays / 7);
      const pmaDays = totalDays % 7;

      document.getElementById('result').innerHTML = `
        ğŸ—“ ìƒí›„ ê²½ê³¼ì¼ìˆ˜: <b>${daysAfterBirth}</b>ì¼<br>
        ğŸ“ PMA: <b>${pmaWeeks}ì£¼ + ${pmaDays}ì¼</b>
      `;
    }

    // ìë™ ê³„ì‚° ì´ë²¤íŠ¸ ì—°ê²°
    document.addEventListener("DOMContentLoaded", () => {
      const today = new Date().toISOString().split("T")[0];
      document.getElementById("birthDate").value = today;
      document.getElementById("referenceDate").value = today;

      const inputs = document.querySelectorAll("input");
      inputs.forEach(input => input.addEventListener("input", calculatePMA));

      calculatePMA(); // ì´ˆê¸° ê³„ì‚°
    });
  </script>

</body>
</html>
